schema: '2.0'
stages:
  load_data:
    cmd: python pipelines/src/load_data.py data/raw/flare_data2_df.csv data/processed/train_test_data.csv
    deps:
    - path: pipelines/src/load_data.py
      hash: md5
      md5: 1386c493be032d1e9a9d944dd5bcc7d6
      size: 801
    params:
      params.yaml:
        data.filepath: data/raw/flare_data2_df.csv
        data.processed: data/processed/train_test_data.csv
    outs:
    - path: data/processed/train_test_data.csv
      hash: md5
      md5: 4003742d52ce74c6e6c1a7ecee077a37
      size: 9333
  preprocess:
    cmd: python -m pipelines.src.preprocess_v2 data/processed/train_test_data.csv
      data/processed/X_test.pt data/processed/X_train.pt data/processed/y_test.pt
      data/processed/y_train.pt
    deps:
    - path: data/processed/train_test_data.csv
      hash: md5
      md5: 4003742d52ce74c6e6c1a7ecee077a37
      size: 9333
    - path: pipelines/src/preprocess_v2.py
      hash: md5
      md5: 866f3241a159d95b9a1499a189569cd9
      size: 2105
    - path: pipelines/transformers/flare_column_transformer.py
      hash: md5
      md5: 733a3f6ea2db53ca7cec129d3fa2b12a
      size: 957
    params:
      params.yaml:
        data.processed: data/processed/train_test_data.csv
    outs:
    - path: data/processed/X_test.pt
      hash: md5
      md5: ee8e37036c887ec85b00d470686d62f4
      size: 11240
    - path: data/processed/X_train.pt
      hash: md5
      md5: 626ea955a6c4596fe34062acbb96f3f6
      size: 3371
    - path: data/processed/y_test.pt
      hash: md5
      md5: 358a2d51f56f4c1e31afc62ab9e49df7
      size: 4702
    - path: data/processed/y_train.pt
      hash: md5
      md5: 68aecc9e8402fb75f2e3ecd393054879
      size: 2019
  train_model:
    cmd: python pipelines/src/train.py data/processed/X_train.pt data/processed/y_train.pt
      models/
    deps:
    - path: data/processed/X_train.pt
      hash: md5
      md5: fd95ff2f1ffa46b092ea437765739686
      size: 11676
    - path: data/processed/y_train.pt
      hash: md5
      md5: 4d60b4745e4cbd004bb42e86ba19e1a5
      size: 5140
    - path: pipelines/src/train.py
      hash: md5
      md5: 5bddd72fa075b1ea76e5a7ca1922d73c
      size: 7336
    params:
      params.yaml:
        train.epochs: 10
    outs:
    - path: models/artifacts_
      hash: md5
      md5: 9b792a95c46bf03d48d861af23b2335c.dir
      size: 16461
      nfiles: 3
  evaluate_model:
    cmd: python pipelines/src/evaluate_model.py data/processed/X_test.pt data/processed/y_test.pt
      models/artifacts_/model_weights.pth 32 models/evaluation_
    deps:
    - path: data/processed/X_test.pt
      hash: md5
      md5: 1ff5cf11be1676822f22b8bf5070baea
      size: 3799
    - path: data/processed/y_test.pt
      hash: md5
      md5: 2329d51d3f8f1291bbd1a0d1523de1b0
      size: 2445
    - path: models/artifacts_/model_weights.pth
      hash: md5
      md5: 2aa5e5b6619954dd36eb39aea8433cf7
      size: 15116
    - path: pipelines/src/evaluate_model.py
      hash: md5
      md5: 4dd0c93e4e1429dfc06bac319e8720c5
      size: 4727
    params:
      params.yaml:
        evaluation.batch_size: 32
    outs:
    - path: models/evaluation_
      hash: md5
      md5: 8a287d54ac5d145c331d1f7c40339b31.dir
      size: 118
      nfiles: 2
  train_model_linear:
    cmd: python -m pipelines.src.train_v2 data/processed/X_train.pt data/processed/y_train.pt
      linear_cnn
    deps:
    - path: data/processed/X_train.pt
      hash: md5
      md5: 626ea955a6c4596fe34062acbb96f3f6
      size: 3371
    - path: data/processed/y_train.pt
      hash: md5
      md5: 68aecc9e8402fb75f2e3ecd393054879
      size: 2019
    - path: pipelines/src/train_v2.py
      hash: md5
      md5: f25c1d3b7fee49b75fda10361bd75fb7
      size: 2614
    params:
      params.yaml:
        models.linear_cnn:
          input_len: 9
          out_features1: 64
          out_features2: 32
          bias: true
    outs:
    - path: data/models/linear_cnn_model.pth
      hash: md5
      md5: 57b5f3b4c79cc0c36176ce3cd73d46b3
      size: 15283
  evaluate_model_linear:
    cmd: python -m pipelines.src.evaluate_v2 data/processed/X_test.pt data/processed/y_test.pt
      data/models/linear_cnn_model.pth
    deps:
    - path: data/models/linear_cnn_model.pth
      hash: md5
      md5: 57b5f3b4c79cc0c36176ce3cd73d46b3
      size: 15283
    - path: data/processed/X_test.pt
      hash: md5
      md5: ee8e37036c887ec85b00d470686d62f4
      size: 11240
    - path: data/processed/y_test.pt
      hash: md5
      md5: 358a2d51f56f4c1e31afc62ab9e49df7
      size: 4702
    - path: pipelines/src/evaluate_v2.py
      hash: md5
      md5: 59e9209f7d3bd8ccd573ac21b09f8930
      size: 1962
    params:
      params.yaml:
        evaluation.batch_size: 32

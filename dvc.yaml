stages:
  download_data:
    cmd: python pipelines\utils\dataset.py
    outs: 
    - data/raw/flare_data2_df.csv 
  load_data:
    cmd: python pipelines/src/load_data.py data/raw/flare_data2_df.csv data/processed/train_test_data.csv
    deps:
    - data/raw/flare_data2_df.csv
    - pipelines/src/load_data.py
    params:
    - data.filepath
    - data.processed
    outs:
    - data/processed/train_test_data.csv
  preprocess:
    cmd: python pipelines/src/preprocess_v2.py data/processed/train_test_data.csv data/processed/X_test.pt
     data/processed/X_train.pt data/processed/y_test.pt data/processed/y_train.pt
    deps:
    - data/processed/train_test_data.csv
    - pipelines/src/preprocess_v2.py
    params:
    - data.processed
    outs:
    - data/processed/X_test.pt
    - data/processed/X_train.pt
    - data/processed/y_test.pt
    - data/processed/y_train.pt
  train_model_linear:
    cmd: python pipelines/src/train.py data/processed/X_train.pt data/processed/y_train.pt linear
    deps:
      - pipelines/src/train.py
      - data/processed/X_train.pt
      - data/processed/y_train.pt
    params:
      - train.epochs
  train_model_convolutional:
    cmd: python pipelines/src/train.py data/processed/X_train.pt data/processed/y_train.pt convolutional
    deps:
      - pipelines/src/train.py
      - data/processed/X_train.pt
      - data/processed/y_train.pt
    params:
      - train.epochs
  evaluate_model_linear:
    cmd: python pipelines/src/evaluate_v2.py data/processed/X_test.pt data/processed/y_test.pt
    deps:
      - data/processed/X_test.pt  
      - data/processed/y_test.pt
    params:
      - evaluation.batch_size  
  evaluate_model_convolutional:
    cmd: python pipelines/src/evaluate_v2.py data/processed/X_test.pt data/processed/y_test.pt
    deps:
      - data/processed/X_test.pt  
      - data/processed/y_test.pt
    params:
      - evaluation.batch_size  